mixed-port: 7890
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
ipv6: false
profile:
  store-selected: true
  tracing: false
  store-fake-ip: false
unified-delay: true
hosts:
  dnslog.cn: 47.244.138.18

dns:
  enable: true
  ipv6: false
  listen: '0.0.0.0:1053'
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  use-hosts: true
  default-nameserver: [223.5.5.5]
  nameserver: ['https://doh.pub/dns-query', 'https://dns.alidns.com/dns-query']
  fake-ip-filter:
    [
      '*.lan',
      localhost.ptlogin2.qq.com,
      dns.msftncsi.com,
      '*.srv.nintendo.net',
      '*.stun.playstation.net',
      'xbox.*.microsoft.com',
      '*.xboxlive.com'
    ]
  fallback: [1.1.1.1, 8.8.8.8]
  fallback-filter: { geoip: true, geoip-code: CN, ipcidr: [240.0.0.0/4] }

proxies:
  - name: 'ğŸŸ¢ ç›´è¿'
    type: direct
    udp: true

# é”šç‚¹
pr:
  &pr {
    type: select,
    proxies:
      [
        ğŸš€ èŠ‚ç‚¹é€‰æ‹©,
        ğŸ”¯ é¦™æ¸¯æ•…è½¬,
        ğŸ”¯ æ—¥æœ¬æ•…è½¬,
        ğŸ”¯ æ–°åŠ å¡æ•…è½¬,
        ğŸ”¯ è‡ªå»ºæ•…è½¬,
        â™»ï¸ é¦™æ¸¯è‡ªåŠ¨,
        â™»ï¸ æ—¥æœ¬è‡ªåŠ¨,
        â™»ï¸ æ–°åŠ å¡è‡ªåŠ¨,
        â™»ï¸ ç¾å›½è‡ªåŠ¨,
        â™»ï¸ è‡ªå»ºèŠ‚ç‚¹,
        â™»ï¸ è‡ªåŠ¨é€‰æ‹©,
        ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹,
        ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹,
        ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹,
        ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹,
        ğŸŒ å…¨éƒ¨èŠ‚ç‚¹,
        ğŸŸ¢ ç›´è¿
      ]
  }
# ç­–ç•¥ç»„
proxy-groups:
  - {
      name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©,
      type: select,
      proxies:
        [
          ğŸ”¯ é¦™æ¸¯æ•…è½¬,
          ğŸ”¯ æ—¥æœ¬æ•…è½¬,
          ğŸ”¯ æ–°åŠ å¡æ•…è½¬,
          ğŸ”¯ è‡ªå»ºæ•…è½¬,
          â™»ï¸ é¦™æ¸¯è‡ªåŠ¨,
          â™»ï¸ æ—¥æœ¬è‡ªåŠ¨,
          â™»ï¸ æ–°åŠ å¡è‡ªåŠ¨,
          â™»ï¸ ç¾å›½è‡ªåŠ¨,
          â™»ï¸ è‡ªå»ºèŠ‚ç‚¹,
          â™»ï¸ è‡ªåŠ¨é€‰æ‹©,
          ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹,
          ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹,
          ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹,
          ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹,
          ğŸŒ å…¨éƒ¨èŠ‚ç‚¹,
          ğŸŸ¢ ç›´è¿
        ]
    }
  - { name: ğŸ“¹ YouTube, !!merge <<: *pr }
  - { name: ğŸ€ Google, !!merge <<: *pr }
  - { name: ğŸ¤– ChatGPT, !!merge <<: *pr }
  - { name: ğŸ‘¨ğŸ¿â€ğŸ’» GitHub, !!merge <<: *pr }
  - { name: ğŸ¬ OneDrive, !!merge <<: *pr }
  - { name: ğŸªŸ Microsoft, !!merge <<: *pr }
  - { name: ğŸµ TikTok, !!merge <<: *pr }
  - { name: ğŸ“² Telegram, !!merge <<: *pr }
  - { name: ğŸ¥ NETFLIX, !!merge <<: *pr }
  - { name: âœˆï¸ Speedtest, !!merge <<: *pr }
  - { name: ğŸ’¶ PayPal, !!merge <<: *pr }
  - { name: ğŸ Apple, type: select, proxies: [ğŸŸ¢ ç›´è¿, ğŸš€ èŠ‚ç‚¹é€‰æ‹©] }
  - { name: ğŸ¯ å…¨çƒç›´è¿, type: select, proxies: [ğŸŸ¢ ç›´è¿, ğŸš€ èŠ‚ç‚¹é€‰æ‹©] }
  - { name: ğŸŸ æ¼ç½‘ä¹‹é±¼, !!merge <<: *pr }
  - {
      name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹,
      type: select,
      include-all: true,
      filter: '(?i)æ¸¯|hk|hongkong|hong kong'
    }
  - {
      name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹,
      type: select,
      include-all: true,
      filter: '(?i)æ—¥|jp|japan'
    }
  - {
      name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹,
      type: select,
      include-all: true,
      filter: '(?i)æ–°|sg|singapore'
    }
  - {
      name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹,
      type: select,
      include-all: true,
      filter: '(?i)ç¾|us|unitedstates|united states'
    }
  - {
      name: ğŸ”¯ é¦™æ¸¯æ•…è½¬,
      type: fallback,
      include-all: true,
      tolerance: 20,
      interval: 300,
      filter: '(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|æ·±|ç¾)).)*$'
    }
  - {
      name: ğŸ”¯ æ—¥æœ¬æ•…è½¬,
      type: fallback,
      include-all: true,
      tolerance: 20,
      interval: 300,
      filter: '(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$'
    }
  - {
      name: ğŸ”¯ æ–°åŠ å¡æ•…è½¬,
      type: fallback,
      include-all: true,
      tolerance: 20,
      interval: 300,
      filter: '(?=.*(æ–°|SG|(?i)Singapore))^((?!(å°|æ—¥|éŸ©|æ¸¯|æ·±|ç¾)).)*$'
    }
  - {
      name: ğŸ”¯ è‡ªå»ºæ•…è½¬,
      type: fallback,
      include-all: true,
      tolerance: 20,
      interval: 300,
      filter: '(?=.*(è‡ªå»º|ZJ|cloudcone))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°|ç¾)).)*$'
    }
  - {
      name: â™»ï¸ é¦™æ¸¯è‡ªåŠ¨,
      type: url-test,
      include-all: true,
      tolerance: 20,
      interval: 300,
      filter: '(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|æ·±|ç¾)).)*$'
    }
  - {
      name: â™»ï¸ æ—¥æœ¬è‡ªåŠ¨,
      type: url-test,
      include-all: true,
      tolerance: 20,
      interval: 300,
      filter: '(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$'
    }
  - {
      name: â™»ï¸ æ–°åŠ å¡è‡ªåŠ¨,
      type: url-test,
      include-all: true,
      tolerance: 20,
      interval: 300,
      filter: '(?=.*(æ–°|SG|(?i)Singapore))^((?!(å°|æ—¥|éŸ©|æ¸¯|ç¾)).)*$'
    }
  - {
      name: â™»ï¸ ç¾å›½è‡ªåŠ¨,
      type: url-test,
      include-all: true,
      tolerance: 20,
      interval: 300,
      filter: '(?=.*(ç¾|US|(?i)States|America))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$'
    }
  - {
      name: â™»ï¸ è‡ªå»ºèŠ‚ç‚¹,
      type: url-test,
      include-all: true,
      tolerance: 20,
      interval: 300,
      filter: '(?=.*(è‡ªå»º|ZJ|cloudcone))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°|ç¾)).)*$'
    }
  - {
      name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©,
      type: url-test,
      include-all: true,
      tolerance: 20,
      interval: 300,
      filter: '^((?!(ç›´è¿)).)*$'
    }
  - { name: ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, type: select, include-all: true }
rules:
  - RULE-SET,private_domain,ğŸŸ¢ ç›´è¿
  - RULE-SET,apple_domain,ğŸ Apple
  - RULE-SET,proxylite,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,ai,ğŸ¤– ChatGPT
  - RULE-SET,github_domain,ğŸ‘¨ğŸ¿â€ğŸ’» GitHub
  - RULE-SET,youtube_domain,ğŸ“¹ YouTube
  - RULE-SET,google_domain,ğŸ€ Google
  - RULE-SET,onedrive_domain,ğŸ¬ OneDrive
  - RULE-SET,microsoft_domain,ğŸªŸ Microsoft
  - RULE-SET,tiktok_domain,ğŸµ TikTok
  - RULE-SET,speedtest_domain,âœˆï¸ Speedtest
  - RULE-SET,telegram_domain,ğŸ“² Telegram
  - RULE-SET,netflix_domain,ğŸ¥ NETFLIX
  - RULE-SET,paypal_domain,ğŸ’¶ PayPal
  - RULE-SET,geolocation-!cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,google_ip,ğŸ€ Google,no-resolve
  - RULE-SET,netflix_ip,ğŸ¥ NETFLIX,no-resolve
  - RULE-SET,telegram_ip,ğŸ“² Telegram,no-resolve
  - RULE-SET,cn_ip,ğŸ¯ å…¨çƒç›´è¿
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,17.0.0.0/8,DIRECT
  - IP-CIDR,100.64.0.0/10,DIRECT
  - IP-CIDR,224.0.0.0/4,DIRECT
  - IP-CIDR,203.0.113.0/24,DIRECT
  - IP-CIDR,192.0.2.0/24,DIRECT
  - IP-CIDR6,fe80::/10,DIRECT
  - GEOIP,LAN,ğŸŸ¢ ç›´è¿
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
rule-anchor:
  ip: &ip { type: http, interval: 86400, behavior: ipcidr, format: mrs }
  domain: &domain { type: http, interval: 86400, behavior: domain, format: mrs }
  qcy: &qcy { type: http, interval: 86400, behavior: domain, format: text }
  class:
    &class { type: http, interval: 86400, behavior: classical, format: text }
rule-providers:
  private_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs'
    }
  proxylite:
    {
      !!merge <<: *qcy,
      url: 'https://raw.githubusercontent.com/qcyhub/rule/master/ProxyLite.list'
    }
  ai:
    {
      !!merge <<: *qcy,
      url: 'https://raw.githubusercontent.com/qcyhub/rule/master/AI.list'
    }
  youtube_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs'
    }
  google_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs'
    }
  github_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs'
    }
  telegram_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs'
    }
  netflix_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs'
    }
  paypal_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/paypal.mrs'
    }
  onedrive_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/onedrive.mrs'
    }
  microsoft_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs'
    }
  apple_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple-cn.mrs'
    }
  speedtest_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.mrs'
    }
  tiktok_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs'
    }
  gfw_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs'
    }
  geolocation-!cn:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs'
    }
  cn_domain:
    {
      !!merge <<: *domain,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs'
    }

  cn_ip:
    {
      !!merge <<: *ip,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs'
    }
  google_ip:
    {
      !!merge <<: *ip,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs'
    }
  telegram_ip:
    {
      !!merge <<: *ip,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs'
    }
  netflix_ip:
    {
      !!merge <<: *ip,
      url: 'https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs'
    }
